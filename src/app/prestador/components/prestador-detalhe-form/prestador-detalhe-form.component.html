<div class="header">
    <a [routerLink]="['/prestadores']">
        <button class="button">Voltar</button>
    </a>

    <button (click)="onNotEditing()" *ngIf="isEditing" class="button danger">
        Cancelar
    </button>

    <button (click)="onEditing()" *ngIf="!isEditing" class="button success">
        Editar
    </button>

</div>

<div class="content">
    <ng-container *ngIf="!provider" class="content">
        <p>Nada por aqui</p>
    </ng-container>

    <ng-container *ngIf="provider" class="content">
        <form [formGroup]="form" class="form">

            <div class="detail-container">
                <div *ngIf="isEditing" class="detail-line">
                    <h2 class="field">Id</h2>
                    <input class="value-form-id" *ngIf="isEditing" type="text" id="id" formControlName="id"
                        [value]="provider.id">
                </div>

                <div class="detail-line">
                    <h2 class="field">Nome</h2>
                    <h2 class="value" *ngIf="!isEditing">{{provider.name | name}}</h2>
                    <input class="value-form" *ngIf="isEditing" type="text" id="firstName" formControlName="firstName"
                        [value]="provider.name | name" placeholder="nome">
                    <input class="value-form" *ngIf="isEditing" type="text" id="lastName" formControlName="lastName"
                        [value]="provider.name | name" placeholder="sobrenome">
                </div>

                <div class="detail-line">
                    <h2 class="field">Telefone</h2>
                    <h2 class="value" *ngIf="!isEditing">{{provider.phone | phone}}</h2>
                    <input class="value-form" *ngIf="isEditing" type="text" id="phone" formControlName="phone"
                        [value]="provider.phone | phone" placeholder="telefone">
                </div>

                <div class="detail-line">
                    <h2 class="field">Email</h2>
                    <h2 class="value" *ngIf="!isEditing">{{provider.email | email}}</h2>
                    <input class="value-form" *ngIf="isEditing" type="text" id="email" formControlName="email"
                        [value]="provider.email | email" placeholder="email">
                </div>

                <div class="detail-line">
                    <h2 class="field">Observações</h2>
                    <h2 class="value" *ngIf="!isEditing">{{provider.details | details}}</h2>
                    <input class="value-form" *ngIf="isEditing" type="text" id="details" formControlName="details"
                        [value]="provider.details | details" placeholder="observações">
                </div>

                <div class="detail-line" *ngIf="!isEditing">
                    <button (click)="openContractAccordion()" [ngClass]="{'active': contractAccordion}"
                        class="button accordion">Contratos</button>

                    <div class="panel" [ngClass]="{'active': contractAccordion}">

                        <ng-container *ngIf="provider.contracts.length > 0">
                            <app-card-contract *ngFor="let contract of provider.contracts" [contract]="contract" />
                        </ng-container>

                        <ng-container *ngIf="provider.contracts.length < 1">
                            <h2 class="value">Nada aqui</h2>
                        </ng-container>


                    </div>
                </div>

                <div class="detail-line" *ngIf="!isEditing">
                    <button (click)="openComissionAccordion()" [ngClass]="{'active': comissionAccordion}"
                        class="button accordion">Comissões</button>

                    <div class="panel" [ngClass]="{'active': comissionAccordion}">
                        <ng-container *ngIf="provider.comissions.length > 0">
                            <app-comissao-card *ngFor="let comission of provider.comissions" [comission]="comission" />
                        </ng-container>

                        <ng-container *ngIf="provider.comissions.length < 1">
                            <h2 class="value">Nada aqui</h2>
                        </ng-container>
                    </div>

                </div>

                <div *ngIf="isEditing" class="detail-line">
                    <h2 class="field">Criado em</h2>
                    <input class="value-form-id" *ngIf="isEditing" type="text" id="createAt" formControlName="createAt"
                        [value]='provider.createAt | date: "d/MM/YYY - HH:mm:ss"'>
                </div>

                <div class="last-line">
                    <button class="button success " (click)="onUpdate()" *ngIf="isEditing"> Salvar </button>
                </div>
            </div>
        </form>
    </ng-container>

</div>